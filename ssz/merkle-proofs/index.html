
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ethereum.github.io/consensus-specs/ssz/merkle-proofs/">
      
      
        <link rel="prev" href="../../light-client/">
      
      
        <link rel="next" href="../simple-serialize/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.5">
    
    
      
        <title>Merkle proof formats - Ethereum Consensus Specs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7a7fce14.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#merkle-proof-formats" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Ethereum Consensus Specs" class="md-header__button md-logo" aria-label="Ethereum Consensus Specs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ethereum Consensus Specs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Merkle proof formats
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../specs/phase0/beacon-chain/" class="md-tabs__link">
        Specs
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../docs/new-feature/" class="md-tabs__link">
        Docs
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../fork_choice/safe-block/" class="md-tabs__link">
        Fork choice
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../light-client/" class="md-tabs__link">
        Light client
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="./" class="md-tabs__link md-tabs__link--active">
        Ssz
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../sync/optimistic/" class="md-tabs__link">
        Sync
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Ethereum Consensus Specs" class="md-nav__button md-logo" aria-label="Ethereum Consensus Specs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Ethereum Consensus Specs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Ethereum Proof-of-Stake Consensus Specifications
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Specs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Specs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Phase0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Phase0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/phase0/beacon-chain/" class="md-nav__link">
        Phase 0 -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/phase0/deposit-contract/" class="md-nav__link">
        Phase 0 -- Deposit Contract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/phase0/fork-choice/" class="md-nav__link">
        Phase 0 -- Beacon Chain Fork Choice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/phase0/p2p-interface/" class="md-nav__link">
        Phase 0 -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/phase0/validator/" class="md-nav__link">
        Phase 0 -- Honest Validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/phase0/weak-subjectivity/" class="md-nav__link">
        Phase 0 -- Weak Subjectivity Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Altair
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Altair
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/beacon-chain/" class="md-nav__link">
        Altair -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/bls/" class="md-nav__link">
        Altair -- BLS extensions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/fork/" class="md-nav__link">
        Altair -- Fork Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/p2p-interface/" class="md-nav__link">
        Altair -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/validator/" class="md-nav__link">
        Altair -- Honest Validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2_6" id="__nav_2_2_6_label" tabindex="0">
          Light client
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_6">
          <span class="md-nav__icon md-icon"></span>
          Light client
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/light-client/full-node/" class="md-nav__link">
        Altair Light Client -- Full Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/light-client/light-client/" class="md-nav__link">
        Altair Light Client -- Light Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/light-client/p2p-interface/" class="md-nav__link">
        Altair Light Client -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/light-client/sync-protocol/" class="md-nav__link">
        Altair Light Client -- Sync Protocol
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Bellatrix
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Bellatrix
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/bellatrix/beacon-chain/" class="md-nav__link">
        Bellatrix -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/bellatrix/fork-choice/" class="md-nav__link">
        Bellatrix -- Fork Choice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/bellatrix/fork/" class="md-nav__link">
        Bellatrix -- Fork Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/bellatrix/p2p-interface/" class="md-nav__link">
        Bellatrix -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/bellatrix/validator/" class="md-nav__link">
        Bellatrix -- Honest Validator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Capella
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Capella
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/beacon-chain/" class="md-nav__link">
        Capella -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/fork-choice/" class="md-nav__link">
        Capella -- Fork Choice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/fork/" class="md-nav__link">
        Capella -- Fork Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/p2p-interface/" class="md-nav__link">
        Capella -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/validator/" class="md-nav__link">
        Capella -- Honest Validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_6" id="__nav_2_4_6_label" tabindex="0">
          Light client
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_6">
          <span class="md-nav__icon md-icon"></span>
          Light client
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/light-client/fork/" class="md-nav__link">
        Capella Light Client -- Fork Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/light-client/full-node/" class="md-nav__link">
        Capella Light Client -- Full Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/light-client/p2p-interface/" class="md-nav__link">
        Capella Light Client -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/light-client/sync-protocol/" class="md-nav__link">
        Capella Light Client -- Sync Protocol
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
      
      
      
        <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          Deneb
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Deneb
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/beacon-chain/" class="md-nav__link">
        Deneb -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/fork-choice/" class="md-nav__link">
        Deneb -- Fork Choice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/fork/" class="md-nav__link">
        Deneb -- Fork Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/p2p-interface/" class="md-nav__link">
        Deneb -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/polynomial-commitments/" class="md-nav__link">
        Deneb -- Polynomial Commitments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/validator/" class="md-nav__link">
        Deneb -- Honest Validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_7" >
      
      
      
        <label class="md-nav__link" for="__nav_2_5_7" id="__nav_2_5_7_label" tabindex="0">
          Light client
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_7">
          <span class="md-nav__icon md-icon"></span>
          Light client
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/light-client/fork/" class="md-nav__link">
        Deneb Light Client -- Fork Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/light-client/full-node/" class="md-nav__link">
        Deneb Light Client -- Full Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/light-client/p2p-interface/" class="md-nav__link">
        Deneb Light Client -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/light-client/sync-protocol/" class="md-nav__link">
        Deneb Light Client -- Sync Protocol
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
          Electra
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Electra
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/electra/beacon-chain/" class="md-nav__link">
        Electra -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/electra/fork/" class="md-nav__link">
        Electra -- Fork Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/electra/p2p-interface/" class="md-nav__link">
        Electra -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/electra/validator/" class="md-nav__link">
        Electra -- Honest Validator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
      
      
      
        <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
           features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
           features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_7_1" id="__nav_2_7_1_label" tabindex="0">
          Custody game
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_1">
          <span class="md-nav__icon md-icon"></span>
          Custody game
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/custody_game/beacon-chain/" class="md-nav__link">
        Custody Game -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/custody_game/validator/" class="md-nav__link">
        Custody Game -- Honest Validator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_7_2" id="__nav_2_7_2_label" tabindex="0">
          Das
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_2">
          <span class="md-nav__icon md-icon"></span>
          Das
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/das/das-core/" class="md-nav__link">
        Data Availability Sampling -- Core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/das/fork-choice/" class="md-nav__link">
        Data Availability Sampling -- Fork Choice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/das/p2p-interface/" class="md-nav__link">
        Data Availability Sampling -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/das/sampling/" class="md-nav__link">
        Data Availability Sampling -- Sampling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_7_3" id="__nav_2_7_3_label" tabindex="0">
          Eip6914
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_3">
          <span class="md-nav__icon md-icon"></span>
          Eip6914
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/eip6914/beacon-chain/" class="md-nav__link">
        EIP-6914 -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/eip6914/fork-choice/" class="md-nav__link">
        EIP-6914 -- Fork Choice
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_7_4" id="__nav_2_7_4_label" tabindex="0">
          Eip7594
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_4">
          <span class="md-nav__icon md-icon"></span>
          Eip7594
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/eip7594/das-core/" class="md-nav__link">
        EIP-7594 -- Data Availability Sampling Core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/eip7594/fork/" class="md-nav__link">
        EIP7594 -- Fork Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/eip7594/p2p-interface/" class="md-nav__link">
        EIP-7594 -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/eip7594/polynomial-commitments-sampling/" class="md-nav__link">
        EIP-7594 -- Polynomial Commitments
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_5" >
      
      
      
        <label class="md-nav__link" for="__nav_2_7_5" id="__nav_2_7_5_label" tabindex="0">
          Sharding
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_5">
          <span class="md-nav__icon md-icon"></span>
          Sharding
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/sharding/beacon-chain/" class="md-nav__link">
        Sharding -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/sharding/p2p-interface/" class="md-nav__link">
        Sharding -- Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/sharding/polynomial-commitments/" class="md-nav__link">
        Sharding -- Polynomial Commitments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/sharding/validator/" class="md-nav__link">
        Sharding -- Honest Validator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_7_6" id="__nav_2_7_6_label" tabindex="0">
          Whisk
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_6">
          <span class="md-nav__icon md-icon"></span>
          Whisk
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/whisk/beacon-chain/" class="md-nav__link">
        Whisk -- The Beacon Chain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_features/whisk/fork/" class="md-nav__link">
        Whisk -- Fork Logic
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docs/new-feature/" class="md-nav__link">
        How to add a new feature proposal in consensus-specs
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          Templates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Templates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docs/templates/beacon-chain-template/" class="md-nav__link">
        `beacon-chain.md` Template
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Fork choice
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Fork choice
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fork_choice/safe-block/" class="md-nav__link">
        Fork Choice -- Safe Block
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          Fork Choice -- Core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Fork Choice -- Core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/phase0/fork-choice" class="md-nav__link">
        phase0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/bellatrix/fork-choice" class="md-nav__link">
        bellatrix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/fork-choice" class="md-nav__link">
        capella
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/fork-choice" class="md-nav__link">
        deneb
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Light client
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Light client
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../light-client/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/altair/light-client/sync-protocol" class="md-nav__link">
        Altair
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/capella/light-client/sync-protocol" class="md-nav__link">
        Capella
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/deneb/light-client/sync-protocol" class="md-nav__link">
        Deneb
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Ssz
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Ssz
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Merkle proof formats
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Merkle proof formats
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    Helper functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generalized-merkle-tree-index" class="md-nav__link">
    Generalized Merkle tree index
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssz-object-to-index" class="md-nav__link">
    SSZ object to index
  </a>
  
    <nav class="md-nav" aria-label="SSZ object to index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helpers-for-generalized-indices" class="md-nav__link">
    Helpers for generalized indices
  </a>
  
    <nav class="md-nav" aria-label="Helpers for generalized indices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#concat_generalized_indices" class="md-nav__link">
    concat_generalized_indices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_generalized_index_length" class="md-nav__link">
    get_generalized_index_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_generalized_index_bit" class="md-nav__link">
    get_generalized_index_bit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generalized_index_sibling" class="md-nav__link">
    generalized_index_sibling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generalized_index_child" class="md-nav__link">
    generalized_index_child
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generalized_index_parent" class="md-nav__link">
    generalized_index_parent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merkle-multiproofs" class="md-nav__link">
    Merkle multiproofs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../simple-serialize/" class="md-nav__link">
        SimpleSerialize (SSZ)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Sync
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Sync
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sync/optimistic/" class="md-nav__link">
        Optimistic Sync
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    Helper functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generalized-merkle-tree-index" class="md-nav__link">
    Generalized Merkle tree index
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssz-object-to-index" class="md-nav__link">
    SSZ object to index
  </a>
  
    <nav class="md-nav" aria-label="SSZ object to index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helpers-for-generalized-indices" class="md-nav__link">
    Helpers for generalized indices
  </a>
  
    <nav class="md-nav" aria-label="Helpers for generalized indices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#concat_generalized_indices" class="md-nav__link">
    concat_generalized_indices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_generalized_index_length" class="md-nav__link">
    get_generalized_index_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_generalized_index_bit" class="md-nav__link">
    get_generalized_index_bit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generalized_index_sibling" class="md-nav__link">
    generalized_index_sibling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generalized_index_child" class="md-nav__link">
    generalized_index_child
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generalized_index_parent" class="md-nav__link">
    generalized_index_parent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merkle-multiproofs" class="md-nav__link">
    Merkle multiproofs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="merkle-proof-formats">Merkle proof formats<a class="headerlink" href="#merkle-proof-formats" title="Permanent link">&para;</a></h1>
<p><strong>Notice</strong>: This document is a work-in-progress for researchers and implementers.</p>
<h2 id="table-of-contents">Table of contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<!-- TOC -->
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<ul>
<li><a href="#helper-functions">Helper functions</a></li>
<li><a href="#generalized-merkle-tree-index">Generalized Merkle tree index</a></li>
<li><a href="#ssz-object-to-index">SSZ object to index</a></li>
<li><a href="#helpers-for-generalized-indices">Helpers for generalized indices</a><ul>
<li><a href="#concat_generalized_indices"><code>concat_generalized_indices</code></a></li>
<li><a href="#get_generalized_index_length"><code>get_generalized_index_length</code></a></li>
<li><a href="#get_generalized_index_bit"><code>get_generalized_index_bit</code></a></li>
<li><a href="#generalized_index_sibling"><code>generalized_index_sibling</code></a></li>
<li><a href="#generalized_index_child"><code>generalized_index_child</code></a></li>
<li><a href="#generalized_index_parent"><code>generalized_index_parent</code></a></li>
</ul>
</li>
<li><a href="#merkle-multiproofs">Merkle multiproofs</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<!-- /TOC -->

<h2 id="helper-functions">Helper functions<a class="headerlink" href="#helper-functions" title="Permanent link">&para;</a></h2>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-12">12</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_power_of_two_ceil</span><span style="color: #f8f8f2">(x:</span> <span style="color: #f8f8f2">int)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">int:</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span style="color: #e6db74">    Get the power of 2 for given input, or the closest higher power of 2 if the input is not a power of 2.</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span style="color: #e6db74">    Commonly used for &quot;how many nodes do I need for a bottom tree layer fitting x elements?&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span style="color: #e6db74">    Example: 0-&gt;1, 1-&gt;1, 2-&gt;2, 3-&gt;4, 4-&gt;4, 5-&gt;8, 6-&gt;8, 7-&gt;8, 8-&gt;8, 9-&gt;16.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">x</span> <span style="color: #ff4689">&lt;=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>        <span style="color: #66d9ef">return</span> <span style="color: #ae81ff">1</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span style="color: #66d9ef">elif</span> <span style="color: #f8f8f2">x</span> <span style="color: #ff4689">==</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span style="color: #66d9ef">return</span> <span style="color: #ae81ff">2</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>    <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>        <span style="color: #66d9ef">return</span> <span style="color: #ae81ff">2</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">get_power_of_two_ceil((x</span> <span style="color: #ff4689">+</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-12">12</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-13">13</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_power_of_two_floor</span><span style="color: #f8f8f2">(x:</span> <span style="color: #f8f8f2">int)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">int:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span style="color: #e6db74">    Get the power of 2 for given input, or the closest lower power of 2 if the input is not a power of 2.</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span style="color: #e6db74">    The zero case is a placeholder and not used for math with generalized indices.</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span style="color: #e6db74">    Commonly used for &quot;what power of two makes up the root bit of the generalized index?&quot;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span style="color: #e6db74">    Example: 0-&gt;1, 1-&gt;1, 2-&gt;2, 3-&gt;2, 4-&gt;4, 5-&gt;4, 6-&gt;4, 7-&gt;4, 8-&gt;8, 9-&gt;8</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">x</span> <span style="color: #ff4689">&lt;=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>        <span style="color: #66d9ef">return</span> <span style="color: #ae81ff">1</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">x</span> <span style="color: #ff4689">==</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">x</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>    <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>        <span style="color: #66d9ef">return</span> <span style="color: #ae81ff">2</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">get_power_of_two_floor(x</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="generalized-merkle-tree-index">Generalized Merkle tree index<a class="headerlink" href="#generalized-merkle-tree-index" title="Permanent link">&para;</a></h2>
<p>In a binary Merkle tree, we define a "generalized index" of a node as <code>2**depth + index</code>. Visually, this looks as follows:</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-2-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-2-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-2-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-2-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>    1
<a id="__codelineno-2-2" name="__codelineno-2-2"></a> 2     3
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>4 5   6 7
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>   ...
</code></pre></div></td></tr></table></div>
<p>Note that the generalized index has the convenient property that the two children of node <code>k</code> are <code>2k</code> and <code>2k+1</code>, and also that it equals the position of a node in the linear representation of the Merkle tree that's computed by this function:</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-11">11</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">merkle_tree</span><span style="color: #f8f8f2">(leaves:</span> <span style="color: #f8f8f2">Sequence[Bytes32])</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">Sequence[Bytes32]:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span style="color: #e6db74">    Return an array representing the tree nodes by generalized index: </span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span style="color: #e6db74">    [0, 1, 2, 3, 4, 5, 6, 7], where each layer is a power of 2. The 0 index is ignored. The 1 index is the root.</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span style="color: #e6db74">    The result will be twice the size as the padded bottom layer for the input leaves.</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span style="color: #f8f8f2">bottom_length</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">get_power_of_two_ceil(len(leaves))</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>    <span style="color: #f8f8f2">o</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">[Bytes32()]</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">bottom_length</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">list(leaves)</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">[Bytes32()]</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">(bottom_length</span> <span style="color: #ff4689">-</span> <span style="color: #f8f8f2">len(leaves))</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>    <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">i</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">range(bottom_length</span> <span style="color: #ff4689">-</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span> <span style="color: #ff4689">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">):</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>        <span style="color: #f8f8f2">o[i]</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">hash(o[i</span> <span style="color: #ff4689">*</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">]</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">o[i</span> <span style="color: #ff4689">*</span> <span style="color: #ae81ff">2</span> <span style="color: #ff4689">+</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">])</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">o</span>
</code></pre></div></td></tr></table></div>
<p>We define a custom type <code>GeneralizedIndex</code> as a Python integer type in this document. It can be represented as a Bitvector/Bitlist object as well.</p>
<p>We will define Merkle proofs in terms of generalized indices.</p>
<h2 id="ssz-object-to-index">SSZ object to index<a class="headerlink" href="#ssz-object-to-index" title="Permanent link">&para;</a></h2>
<p>We can describe the hash tree of any SSZ object, rooted in <code>hash_tree_root(object)</code>, as a binary Merkle tree whose depth may vary. For example, an object <code>{x: bytes32, y: List[uint64]}</code> would look as follows:</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-8">8</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>     root
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>    /    \
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>   x    y_root
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>        /    \
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>y_data_root  len(y)
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>    / \
<a id="__codelineno-4-7" name="__codelineno-4-7"></a>   /\ /\
<a id="__codelineno-4-8" name="__codelineno-4-8"></a>  .......
</code></pre></div></td></tr></table></div>
<p>We can now define a concept of a "path", a way of describing a function that takes as input an SSZ object and outputs some specific (possibly deeply nested) member. For example, <code>foo -&gt; foo.x</code> is a path, as are <code>foo -&gt; len(foo.y)</code> and <code>foo -&gt; foo.y[5].w</code>. We'll describe paths as lists, which can have two representations. In "human-readable form", they are <code>["x"]</code>, <code>["y", "__len__"]</code> and <code>["y", 5, "w"]</code> respectively. In "encoded form", they are lists of <code>uint64</code> values, in these cases (assuming the fields of <code>foo</code> in order are <code>x</code> then <code>y</code>, and <code>w</code> is the first field of <code>y[i]</code>) <code>[0]</code>, <code>[1, 2**64-1]</code>, <code>[1, 5, 0]</code>. We define <code>SSZVariableName</code> as the member variable name string, i.e., a path is presented as a sequence of integers and <code>SSZVariableName</code>.</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-8">8</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">item_length</span><span style="color: #f8f8f2">(typ:</span> <span style="color: #f8f8f2">SSZType)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">int:</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span style="color: #e6db74">    Return the number of bytes in a basic type, or 32 (a full hash) for compound types.</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">BasicValue):</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">byte_len</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>    <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>        <span style="color: #66d9ef">return</span> <span style="color: #ae81ff">32</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-7">7</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_elem_type</span><span style="color: #f8f8f2">(typ:</span> <span style="color: #f8f8f2">Union[BaseBytes,</span> <span style="color: #f8f8f2">BaseList,</span> <span style="color: #f8f8f2">Container],</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>                  <span style="color: #f8f8f2">index_or_variable_name:</span> <span style="color: #f8f8f2">Union[int,</span> <span style="color: #f8f8f2">SSZVariableName])</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">SSZType:</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span style="color: #e6db74">    Return the type of the element of an object of the given type with the given index</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span style="color: #e6db74">    or member variable name (eg. `7` for `x[7]`, `&quot;foo&quot;` for `x.foo`)</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">get_fields()[index_or_variable_name]</span> <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">Container)</span> <span style="color: #66d9ef">else</span> <span style="color: #f8f8f2">typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">elem_type</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-12">12</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-13">13</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-14">14</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-15">15</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-16">16</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-17">17</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-18">18</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-19">19</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">chunk_count</span><span style="color: #f8f8f2">(typ:</span> <span style="color: #f8f8f2">SSZType)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">int:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span style="color: #e6db74">    Return the number of hashes needed to represent the top-level elements in the given type</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span style="color: #e6db74">    (eg. `x.foo` or `x[7]` but not `x[7].bar` or `x.foo.baz`). In all cases except lists/vectors</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span style="color: #e6db74">    of basic types, this is simply the number of top-level elements, as each element gets one</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span style="color: #e6db74">    hash. For lists/vectors of basic types, it is often fewer because multiple basic elements</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span style="color: #e6db74">    can be packed into one 32-byte chunk.</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a>    <span style="color: #959077"># typ.length describes the limit for list types, or the length for vector types.</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">BasicValue):</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a>        <span style="color: #66d9ef">return</span> <span style="color: #ae81ff">1</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a>    <span style="color: #66d9ef">elif</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">Bits):</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a>        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">(typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">length</span> <span style="color: #ff4689">+</span> <span style="color: #ae81ff">255</span><span style="color: #f8f8f2">)</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">256</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a>    <span style="color: #66d9ef">elif</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">Elements):</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a>        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">(typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">length</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">item_length(typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">elem_type)</span> <span style="color: #ff4689">+</span> <span style="color: #ae81ff">31</span><span style="color: #f8f8f2">)</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">32</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a>    <span style="color: #66d9ef">elif</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">Container):</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a>        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">len(typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">get_fields())</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a>    <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a>        <span style="color: #66d9ef">raise</span> <span style="color: #a6e22e">Exception</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">f&quot;Type not supported: {</span><span style="color: #f8f8f2">typ</span><span style="color: #e6db74">}&quot;</span><span style="color: #f8f8f2">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-12">12</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-13">13</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-14">14</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-15">15</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-16">16</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-17">17</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_item_position</span><span style="color: #f8f8f2">(typ:</span> <span style="color: #f8f8f2">SSZType,</span> <span style="color: #f8f8f2">index_or_variable_name:</span> <span style="color: #f8f8f2">Union[int,</span> <span style="color: #f8f8f2">SSZVariableName])</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">Tuple[int,</span> <span style="color: #f8f8f2">int,</span> <span style="color: #f8f8f2">int]:</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span style="color: #e6db74">    Return three variables:</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span style="color: #e6db74">        (i) the index of the chunk in which the given element of the item is represented;</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span style="color: #e6db74">        (ii) the starting byte position within the chunk;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span style="color: #e6db74">        (iii) the ending byte position within the chunk.</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span style="color: #e6db74">    For example: for a 6-item list of uint64 values, index=2 will return (0, 16, 24), index=5 will return (1, 8, 16)</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a>    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">Elements):</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a>        <span style="color: #f8f8f2">index</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">int(index_or_variable_name)</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a>        <span style="color: #f8f8f2">start</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">index</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">item_length(typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">elem_type)</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a>        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">start</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">32</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">start</span> <span style="color: #ff4689">%</span> <span style="color: #ae81ff">32</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">start</span> <span style="color: #ff4689">%</span> <span style="color: #ae81ff">32</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">item_length(typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">elem_type)</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a>    <span style="color: #66d9ef">elif</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">Container):</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a>        <span style="color: #f8f8f2">variable_name</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">index_or_variable_name</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a>        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">typ</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">get_field_names()</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">index(variable_name),</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">item_length(get_elem_type(typ,</span> <span style="color: #f8f8f2">variable_name))</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a>    <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a>        <span style="color: #66d9ef">raise</span> <span style="color: #a6e22e">Exception</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;Only lists/vectors/containers supported&quot;</span><span style="color: #f8f8f2">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-12">12</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-13">13</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-14">14</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-15">15</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-16">16</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-17">17</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-18">18</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_generalized_index</span><span style="color: #f8f8f2">(typ:</span> <span style="color: #f8f8f2">SSZType,</span> <span style="color: #ff4689">*</span><span style="color: #f8f8f2">path:</span> <span style="color: #f8f8f2">PyUnion[int,</span> <span style="color: #f8f8f2">SSZVariableName])</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">GeneralizedIndex:</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span style="color: #e6db74">    Converts a path (eg. `[7, &quot;foo&quot;, 3]` for `x[7].foo[3]`, `[12, &quot;bar&quot;, &quot;__len__&quot;]` for</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span style="color: #e6db74">    `len(x[12].bar)`) into the generalized index representing its position in the Merkle tree.</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>    <span style="color: #f8f8f2">root</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">GeneralizedIndex(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a>    <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">p</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">path:</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>        <span style="color: #66d9ef">assert</span> <span style="color: #ff4689">not</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">BasicValue)</span>  <span style="color: #959077"># If we descend to a basic type, the path cannot continue further</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a>        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">p</span> <span style="color: #ff4689">==</span> <span style="color: #e6db74">&#39;__len__&#39;</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a>            <span style="color: #f8f8f2">typ</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">uint64</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a>            <span style="color: #66d9ef">assert</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">(List,</span> <span style="color: #f8f8f2">ByteList))</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a>            <span style="color: #f8f8f2">root</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">GeneralizedIndex(root</span> <span style="color: #ff4689">*</span> <span style="color: #ae81ff">2</span> <span style="color: #ff4689">+</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a>        <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a>            <span style="color: #f8f8f2">pos,</span> <span style="color: #f8f8f2">_,</span> <span style="color: #f8f8f2">_</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">get_item_position(typ,</span> <span style="color: #f8f8f2">p)</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a>            <span style="color: #f8f8f2">base_index</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">(GeneralizedIndex(</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">issubclass(typ,</span> <span style="color: #f8f8f2">(List,</span> <span style="color: #f8f8f2">ByteList))</span> <span style="color: #66d9ef">else</span> <span style="color: #f8f8f2">GeneralizedIndex(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">))</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a>            <span style="color: #f8f8f2">root</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">GeneralizedIndex(root</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">base_index</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">get_power_of_two_ceil(chunk_count(typ))</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">pos)</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a>            <span style="color: #f8f8f2">typ</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">get_elem_type(typ,</span> <span style="color: #f8f8f2">p)</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">root</span>
</code></pre></div></td></tr></table></div>
<h3 id="helpers-for-generalized-indices">Helpers for generalized indices<a class="headerlink" href="#helpers-for-generalized-indices" title="Permanent link">&para;</a></h3>
<p><em>Usage note: functions outside this section should manipulate generalized indices using only functions inside this section. This is to make it easier for developers to implement generalized indices with underlying representations other than bigints.</em></p>
<h4 id="concat_generalized_indices"><code>concat_generalized_indices</code><a class="headerlink" href="#concat_generalized_indices" title="Permanent link">&para;</a></h4>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-8">8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-9">9</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">concat_generalized_indices</span><span style="color: #f8f8f2">(</span><span style="color: #ff4689">*</span><span style="color: #f8f8f2">indices:</span> <span style="color: #f8f8f2">GeneralizedIndex)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">GeneralizedIndex:</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span style="color: #e6db74">    Given generalized indices i1 for A -&gt; B, i2 for B -&gt; C .... i_n for Y -&gt; Z, returns</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span style="color: #e6db74">    the generalized index for A -&gt; Z.</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a>    <span style="color: #f8f8f2">o</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">GeneralizedIndex(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a>    <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">i</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">indices:</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a>        <span style="color: #f8f8f2">o</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">GeneralizedIndex(o</span> <span style="color: #ff4689">*</span> <span style="color: #f8f8f2">get_power_of_two_floor(i)</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">(i</span> <span style="color: #ff4689">-</span> <span style="color: #f8f8f2">get_power_of_two_floor(i)))</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">o</span>
</code></pre></div></td></tr></table></div>
<h4 id="get_generalized_index_length"><code>get_generalized_index_length</code><a class="headerlink" href="#get_generalized_index_length" title="Permanent link">&para;</a></h4>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-5">5</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_generalized_index_length</span><span style="color: #f8f8f2">(index:</span> <span style="color: #f8f8f2">GeneralizedIndex)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">int:</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span style="color: #e6db74">    Return the length of a path represented by a generalized index.</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">int(log2(index))</span>
</code></pre></div></td></tr></table></div>
<h4 id="get_generalized_index_bit"><code>get_generalized_index_bit</code><a class="headerlink" href="#get_generalized_index_bit" title="Permanent link">&para;</a></h4>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-5">5</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_generalized_index_bit</span><span style="color: #f8f8f2">(index:</span> <span style="color: #f8f8f2">GeneralizedIndex,</span> <span style="color: #f8f8f2">position:</span> <span style="color: #f8f8f2">int)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">bool:</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span style="color: #e6db74">    Return the given bit of a generalized index.</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">(index</span> <span style="color: #ff4689">&amp;</span> <span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span> <span style="color: #ff4689">&lt;&lt;</span> <span style="color: #f8f8f2">position))</span> <span style="color: #ff4689">&gt;</span> <span style="color: #ae81ff">0</span>
</code></pre></div></td></tr></table></div>
<h4 id="generalized_index_sibling"><code>generalized_index_sibling</code><a class="headerlink" href="#generalized_index_sibling" title="Permanent link">&para;</a></h4>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-2">2</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">generalized_index_sibling</span><span style="color: #f8f8f2">(index:</span> <span style="color: #f8f8f2">GeneralizedIndex)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">GeneralizedIndex:</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">GeneralizedIndex(index</span> <span style="color: #ff4689">^</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span>
</code></pre></div></td></tr></table></div>
<h4 id="generalized_index_child"><code>generalized_index_child</code><a class="headerlink" href="#generalized_index_child" title="Permanent link">&para;</a></h4>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-14-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-14-2">2</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">generalized_index_child</span><span style="color: #f8f8f2">(index:</span> <span style="color: #f8f8f2">GeneralizedIndex,</span> <span style="color: #f8f8f2">right_side:</span> <span style="color: #f8f8f2">bool)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">GeneralizedIndex:</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">GeneralizedIndex(index</span> <span style="color: #ff4689">*</span> <span style="color: #ae81ff">2</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">right_side)</span>
</code></pre></div></td></tr></table></div>
<h4 id="generalized_index_parent"><code>generalized_index_parent</code><a class="headerlink" href="#generalized_index_parent" title="Permanent link">&para;</a></h4>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-15-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-15-2">2</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">generalized_index_parent</span><span style="color: #f8f8f2">(index:</span> <span style="color: #f8f8f2">GeneralizedIndex)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">GeneralizedIndex:</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">GeneralizedIndex(index</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="merkle-multiproofs">Merkle multiproofs<a class="headerlink" href="#merkle-multiproofs" title="Permanent link">&para;</a></h2>
<p>We define a Merkle multiproof as a minimal subset of nodes in a Merkle tree needed to fully authenticate that a set of nodes actually are part of a Merkle tree with some specified root, at a particular set of generalized indices. For example, here is the Merkle multiproof for positions 0, 1, 6 in an 8-node Merkle tree (i.e. generalized indices 8, 9, 14):</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-16-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-16-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-16-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-16-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a>       .
<a id="__codelineno-16-2" name="__codelineno-16-2"></a>   .       .
<a id="__codelineno-16-3" name="__codelineno-16-3"></a> .   *   *   .
<a id="__codelineno-16-4" name="__codelineno-16-4"></a>x x . . . . x *
</code></pre></div></td></tr></table></div>
<p>. are unused nodes, * are used nodes, x are the values we are trying to prove. Notice how despite being a multiproof for 3 values, it requires only 3 auxiliary nodes, only one node more than would be required to prove a single value. Normally the efficiency gains are not quite that extreme, but the savings relative to individual Merkle proofs are still significant. As a rule of thumb, a multiproof for k nodes at the same level of an n-node tree has size <code>k * (n/k + log(n/k))</code>.</p>
<p>First, we provide a method for computing the generalized indices of the auxiliary tree nodes that a proof of a given set of generalized indices will require:</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-8">8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-9">9</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_branch_indices</span><span style="color: #f8f8f2">(tree_index:</span> <span style="color: #f8f8f2">GeneralizedIndex)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">Sequence[GeneralizedIndex]:</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span style="color: #e6db74">    Get the generalized indices of the sister chunks along the path from the chunk with the</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span style="color: #e6db74">    given tree index to the root.</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a>    <span style="color: #f8f8f2">o</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">[generalized_index_sibling(tree_index)]</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a>    <span style="color: #66d9ef">while</span> <span style="color: #f8f8f2">o[</span><span style="color: #ff4689">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]</span> <span style="color: #ff4689">&gt;</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a>        <span style="color: #f8f8f2">o</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">append(generalized_index_sibling(generalized_index_parent(o[</span><span style="color: #ff4689">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">])))</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">o[:</span><span style="color: #ff4689">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-8">8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-9">9</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_path_indices</span><span style="color: #f8f8f2">(tree_index:</span> <span style="color: #f8f8f2">GeneralizedIndex)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">Sequence[GeneralizedIndex]:</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span style="color: #e6db74">    Get the generalized indices of the chunks along the path from the chunk with the</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span style="color: #e6db74">    given tree index to the root.</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a>    <span style="color: #f8f8f2">o</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">[tree_index]</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a>    <span style="color: #66d9ef">while</span> <span style="color: #f8f8f2">o[</span><span style="color: #ff4689">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]</span> <span style="color: #ff4689">&gt;</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a>        <span style="color: #f8f8f2">o</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">append(generalized_index_parent(o[</span><span style="color: #ff4689">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]))</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">o[:</span><span style="color: #ff4689">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-12">12</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-13">13</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">get_helper_indices</span><span style="color: #f8f8f2">(indices:</span> <span style="color: #f8f8f2">Sequence[GeneralizedIndex])</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">Sequence[GeneralizedIndex]:</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span style="color: #e6db74">    Get the generalized indices of all &quot;extra&quot; chunks in the tree needed to prove the chunks with the given</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span style="color: #e6db74">    generalized indices. Note that the decreasing order is chosen deliberately to ensure equivalence to the</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span style="color: #e6db74">    order of hashes in a regular single-item Merkle proof in the single-item case.</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span style="color: #e6db74">    &quot;&quot;&quot;</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a>    <span style="color: #f8f8f2">all_helper_indices:</span> <span style="color: #f8f8f2">Set[GeneralizedIndex]</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">set()</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a>    <span style="color: #f8f8f2">all_path_indices:</span> <span style="color: #f8f8f2">Set[GeneralizedIndex]</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">set()</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a>    <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">index</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">indices:</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a>        <span style="color: #f8f8f2">all_helper_indices</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">all_helper_indices</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">union(set(get_branch_indices(index)))</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a>        <span style="color: #f8f8f2">all_path_indices</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">all_path_indices</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">union(set(get_path_indices(index)))</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">sorted(all_helper_indices</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">difference(all_path_indices),</span> <span style="color: #f8f8f2">reverse</span><span style="color: #ff4689">=</span><span style="color: #66d9ef">True</span><span style="color: #f8f8f2">)</span>
</code></pre></div></td></tr></table></div>
<p>Now we provide the Merkle proof verification functions. First, for single item proofs:</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-8">8</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">calculate_merkle_root</span><span style="color: #f8f8f2">(leaf:</span> <span style="color: #f8f8f2">Bytes32,</span> <span style="color: #f8f8f2">proof:</span> <span style="color: #f8f8f2">Sequence[Bytes32],</span> <span style="color: #f8f8f2">index:</span> <span style="color: #f8f8f2">GeneralizedIndex)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">Root:</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>    <span style="color: #66d9ef">assert</span> <span style="color: #f8f8f2">len(proof)</span> <span style="color: #ff4689">==</span> <span style="color: #f8f8f2">get_generalized_index_length(index)</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a>    <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">i,</span> <span style="color: #f8f8f2">h</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">enumerate(proof):</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a>        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">get_generalized_index_bit(index,</span> <span style="color: #f8f8f2">i):</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a>            <span style="color: #f8f8f2">leaf</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">hash(h</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">leaf)</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a>        <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a>            <span style="color: #f8f8f2">leaf</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">hash(leaf</span> <span style="color: #ff4689">+</span> <span style="color: #f8f8f2">h)</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">leaf</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-2">2</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">verify_merkle_proof</span><span style="color: #f8f8f2">(leaf:</span> <span style="color: #f8f8f2">Bytes32,</span> <span style="color: #f8f8f2">proof:</span> <span style="color: #f8f8f2">Sequence[Bytes32],</span> <span style="color: #f8f8f2">index:</span> <span style="color: #f8f8f2">GeneralizedIndex,</span> <span style="color: #f8f8f2">root:</span> <span style="color: #f8f8f2">Root)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">bool:</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">calculate_merkle_root(leaf,</span> <span style="color: #f8f8f2">proof,</span> <span style="color: #f8f8f2">index)</span> <span style="color: #ff4689">==</span> <span style="color: #f8f8f2">root</span>
</code></pre></div></td></tr></table></div>
<p>Now for multi-item proofs:</p>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-12">12</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-13">13</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-14">14</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-15">15</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-16">16</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-17">17</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-18">18</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-19">19</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-20">20</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-21">21</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-22">22</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">calculate_multi_merkle_root</span><span style="color: #f8f8f2">(leaves:</span> <span style="color: #f8f8f2">Sequence[Bytes32],</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a>                                <span style="color: #f8f8f2">proof:</span> <span style="color: #f8f8f2">Sequence[Bytes32],</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a>                                <span style="color: #f8f8f2">indices:</span> <span style="color: #f8f8f2">Sequence[GeneralizedIndex])</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">Root:</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a>    <span style="color: #66d9ef">assert</span> <span style="color: #f8f8f2">len(leaves)</span> <span style="color: #ff4689">==</span> <span style="color: #f8f8f2">len(indices)</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a>    <span style="color: #f8f8f2">helper_indices</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">get_helper_indices(indices)</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a>    <span style="color: #66d9ef">assert</span> <span style="color: #f8f8f2">len(proof)</span> <span style="color: #ff4689">==</span> <span style="color: #f8f8f2">len(helper_indices)</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a>    <span style="color: #f8f8f2">objects</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">{</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a>        <span style="color: #ff4689">**</span><span style="color: #f8f8f2">{index:</span> <span style="color: #f8f8f2">node</span> <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">index,</span> <span style="color: #f8f8f2">node</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">zip(indices,</span> <span style="color: #f8f8f2">leaves)},</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a>        <span style="color: #ff4689">**</span><span style="color: #f8f8f2">{index:</span> <span style="color: #f8f8f2">node</span> <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">index,</span> <span style="color: #f8f8f2">node</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">zip(helper_indices,</span> <span style="color: #f8f8f2">proof)}</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a>    <span style="color: #f8f8f2">}</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a>    <span style="color: #f8f8f2">keys</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">sorted(objects</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">keys(),</span> <span style="color: #f8f8f2">reverse</span><span style="color: #ff4689">=</span><span style="color: #66d9ef">True</span><span style="color: #f8f8f2">)</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a>    <span style="color: #f8f8f2">pos</span> <span style="color: #ff4689">=</span> <span style="color: #ae81ff">0</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a>    <span style="color: #66d9ef">while</span> <span style="color: #f8f8f2">pos</span> <span style="color: #ff4689">&lt;</span> <span style="color: #f8f8f2">len(keys):</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a>        <span style="color: #f8f8f2">k</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">keys[pos]</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a>        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">k</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">objects</span> <span style="color: #ff4689">and</span> <span style="color: #f8f8f2">k</span> <span style="color: #ff4689">^</span> <span style="color: #ae81ff">1</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">objects</span> <span style="color: #ff4689">and</span> <span style="color: #f8f8f2">k</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">2</span> <span style="color: #ff4689">not</span> <span style="color: #ff4689">in</span> <span style="color: #f8f8f2">objects:</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a>            <span style="color: #f8f8f2">objects[GeneralizedIndex(k</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">)]</span> <span style="color: #ff4689">=</span> <span style="color: #f8f8f2">hash(</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a>                <span style="color: #f8f8f2">objects[GeneralizedIndex((k</span> <span style="color: #ff4689">|</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span> <span style="color: #ff4689">^</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)]</span> <span style="color: #ff4689">+</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a>                <span style="color: #f8f8f2">objects[GeneralizedIndex(k</span> <span style="color: #ff4689">|</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)]</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a>            <span style="color: #f8f8f2">)</span>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a>            <span style="color: #f8f8f2">keys</span><span style="color: #ff4689">.</span><span style="color: #f8f8f2">append(GeneralizedIndex(k</span> <span style="color: #ff4689">//</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">))</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a>        <span style="color: #f8f8f2">pos</span> <span style="color: #ff4689">+=</span> <span style="color: #ae81ff">1</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">objects[GeneralizedIndex(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight" style="background: #272822"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-5">5</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">verify_merkle_multiproof</span><span style="color: #f8f8f2">(leaves:</span> <span style="color: #f8f8f2">Sequence[Bytes32],</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a>                             <span style="color: #f8f8f2">proof:</span> <span style="color: #f8f8f2">Sequence[Bytes32],</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a>                             <span style="color: #f8f8f2">indices:</span> <span style="color: #f8f8f2">Sequence[GeneralizedIndex],</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>                             <span style="color: #f8f8f2">root:</span> <span style="color: #f8f8f2">Root)</span> <span style="color: #ff4689">-&gt;</span> <span style="color: #f8f8f2">bool:</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a>    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">calculate_multi_merkle_root(leaves,</span> <span style="color: #f8f8f2">proof,</span> <span style="color: #f8f8f2">indices)</span> <span style="color: #ff4689">==</span> <span style="color: #f8f8f2">root</span>
</code></pre></div></td></tr></table></div>
<p>Note that the single-item proof is a special case of a multi-item proof; a valid single-item proof verifies correctly when put into the multi-item verification function (making the natural trivial changes to input arguments, <code>index -&gt; [index]</code> and <code>leaf -&gt; [leaf]</code>). Note also that <code>calculate_merkle_root</code> and <code>calculate_multi_merkle_root</code> can be used independently to compute the new Merkle root of a proof with leaves updated.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ethereum/consensus-specs" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "search"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.407015b8.min.js"></script>
      
    
  </body>
</html>